<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DDC Tool: CMake</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DDC Tool
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">CMake</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Integration</h1>
<p>You can also use the <code>nlohmann_json::nlohmann_json</code> interface target in CMake. This target populates the appropriate usage requirements for <code>INTERFACE_INCLUDE_DIRECTORIES</code> to point to the appropriate include directories and <code>INTERFACE_COMPILE_FEATURES</code> for the necessary C++11 flags.</p>
<h2>External</h2>
<p>To use this library from a CMake project, you can locate it directly with <code>find_package()</code> and use the namespaced imported target from the generated package configuration:</p>
<div class="fragment"><div class="line"># CMakeLists.txt</div>
<div class="line">find_package(nlohmann_json 3.2.0 REQUIRED)</div>
<div class="line">...</div>
<div class="line">add_library(foo ...)</div>
<div class="line">...</div>
<div class="line">target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)</div>
</div><!-- fragment --><p>The package configuration file, <code>nlohmann_jsonConfig.cmake</code>, can be used either from an install tree or directly out of the build tree.</p>
<h2>Embedded</h2>
<p>To embed the library directly into an existing CMake project, place the entire source tree in a subdirectory and call <code>add_subdirectory()</code> in your <code>CMakeLists.txt</code> file:</p>
<div class="fragment"><div class="line"># If you only include this third party in PRIVATE source files, you do not</div>
<div class="line"># need to install it when your main project gets installed.</div>
<div class="line"># set(JSON_Install OFF CACHE INTERNAL &quot;&quot;)</div>
<div class="line"> </div>
<div class="line"># Don&#39;t use include(nlohmann_json/CMakeLists.txt) since that carries with it</div>
<div class="line"># unintended consequences that will break the build.  It&#39;s generally</div>
<div class="line"># discouraged (although not necessarily well documented as such) to use</div>
<div class="line"># include(...) for pulling in other CMake projects anyways.</div>
<div class="line">add_subdirectory(nlohmann_json)</div>
<div class="line">...</div>
<div class="line">add_library(foo ...)</div>
<div class="line">...</div>
<div class="line">target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)</div>
</div><!-- fragment --><h2>Embedded (FetchContent)</h2>
<p>Since CMake v3.11, <a href="https://cmake.org/cmake/help/v3.11/module/FetchContent.html">FetchContent</a> can be used to automatically download the repository as a dependency at configure type.</p>
<p>Example: </p><div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(json</div>
<div class="line">  GIT_REPOSITORY https://github.com/nlohmann/json</div>
<div class="line">  GIT_TAG v3.7.3)</div>
<div class="line"> </div>
<div class="line">FetchContent_GetProperties(json)</div>
<div class="line">if(NOT json_POPULATED)</div>
<div class="line">  FetchContent_Populate(json)</div>
<div class="line">  add_subdirectory(${json_SOURCE_DIR} ${json_BINARY_DIR} EXCLUDE_FROM_ALL)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)</div>
</div><!-- fragment --><p>!!! Note The repository <a href="https://github.com/nlohmann/json">https://github.com/nlohmann/json</a> download size is quite large. You might want to depend on a smaller repository. For instance, you might want to replace the URL above by <a href="https://github.com/ArthurSonzogni/nlohmann_json_cmake_fetchcontent">https://github.com/ArthurSonzogni/nlohmann_json_cmake_fetchcontent</a>.</p>
<h2>Supporting Both</h2>
<p>To allow your project to support either an externally supplied or an embedded JSON library, you can use a pattern akin to the following:</p>
<div class="fragment"><div class="line"> cmake</div>
<div class="line"># Top level CMakeLists.txt</div>
<div class="line">project(FOO)</div>
<div class="line">...</div>
<div class="line">option(FOO_USE_EXTERNAL_JSON &quot;Use an external JSON library&quot; OFF)</div>
<div class="line">...</div>
<div class="line">add_subdirectory(thirdparty)</div>
<div class="line">...</div>
<div class="line">add_library(foo ...)</div>
<div class="line">...</div>
<div class="line"># Note that the namespaced target will always be available regardless of the</div>
<div class="line"># import method</div>
<div class="line">target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)</div>
</div><!-- fragment --> <div class="fragment"><div class="line"># thirdparty/CMakeLists.txt</div>
<div class="line">...</div>
<div class="line">if(FOO_USE_EXTERNAL_JSON)</div>
<div class="line">  find_package(nlohmann_json 3.2.0 REQUIRED)</div>
<div class="line">else()</div>
<div class="line">  set(JSON_BuildTests OFF CACHE INTERNAL &quot;&quot;)</div>
<div class="line">  add_subdirectory(nlohmann_json)</div>
<div class="line">endif()</div>
<div class="line">...</div>
</div><!-- fragment --><p><code>thirdparty/nlohmann_json</code> is then a complete copy of this source tree.</p>
<h1>CMake Options</h1>
<h2><code>JSON_BuildTests</code></h2>
<p>Build the unit tests when <a href="https://cmake.org/cmake/help/latest/command/enable_testing.html"><code>BUILD_TESTING</code></a> is enabled. This option is <code>ON</code> by default if the library's CMake project is the top project. That is, when integrating the library as described above, the test suite is not built unless explicitly switched on with this option.</p>
<h2><code>JSON_CI</code></h2>
<p>Enable CI build targets. The exact targets are used during the several CI steps and are subject to change without notice. This option is <code>OFF</code> by default.</p>
<h2><code>JSON_Diagnostics</code></h2>
<p>Enable <a href="../../../home/exceptions.md#extended-diagnostic-messages">extended diagnostic messages</a> by defining macro <a href="../../../features/macros.md#json_diagnostics"><code>JSON_DIAGNOSTICS</code></a>. This option is <code>OFF</code> by default.</p>
<h2><code>JSON_FastTests</code></h2>
<p>Skip expensive/slow test suites. This option is <code>OFF</code> by default. Depends on <code>JSON_BuildTests</code>.</p>
<h2><code>JSON_ImplicitConversions</code></h2>
<p>Enable implicit conversions by defining macro <a href="../../../features/macros.md#json_use_implicit_conversions"><code>JSON_USE_IMPLICIT_CONVERSIONS</code></a>. This option is <code>ON</code> by default.</p>
<h2><code>JSON_Install</code></h2>
<p>Install CMake targets during install step. This option is <code>ON</code> by default if the library's CMake project is the top project.</p>
<h2><code>JSON_MultipleHeaders</code></h2>
<p>Use non-amalgamated version of the library. This option is <code>OFF</code> by default.</p>
<h2><code>JSON_SystemInclude</code></h2>
<p>Treat the library headers like system headers (i.e., adding <code>SYSTEM</code> to the <a href="https://cmake.org/cmake/help/latest/command/target_include_directories.html"><code>target_include_directories</code></a> call) to checks for this library by tools like Clang-Tidy. This option is <code>OFF</code> by default.</p>
<h2><code>JSON_Valgrind</code></h2>
<p>Execute test suite with <a href="https://valgrind.org">Valgrind</a>. This option is <code>OFF</code> by default. Depends on <code>JSON_BuildTests</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
